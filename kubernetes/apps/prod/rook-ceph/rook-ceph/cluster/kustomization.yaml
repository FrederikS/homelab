apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - "./secret.sops.yaml"
  - "./cluster.yaml"
  - "./storageclass.yaml"
  - "./objectstorage.yaml"
  # - "./toolbox.yaml"
patches:
  - target:
      kind: Node
      name: tc01
    patch: |-
      spec:
        taints:
          - key: storage
            value: ceph
            effect: NoSchedule
      metadata:
        labels:
          role: storage

  - target:
      kind: Node
      name: tc02
    patch: |-
      spec:
        taints:
          - key: storage
            value: ceph
            effect: NoSchedule
      metadata:
        labels:
          role: storage
